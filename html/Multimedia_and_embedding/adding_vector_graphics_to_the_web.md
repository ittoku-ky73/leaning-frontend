# ウェブにベクターグラフィックスを追加する

> 参考：[ウェブにベクターグラフィックスを追加する](https://developer.mozilla.org/ja/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web)

## ベクターグラフィックとは何か

ウェブ上には、画像の種類にラスター画像とベクター画像の2つがあります。

- ラスター画像
  - ピクセルのグリッド（格子）を使用して定義されます。
  - 画像ファイルには、各ピクセルの配置場所を正確に示す情報と、その色を正確に示す情報が含まれています。
  - 形式には、`.bmp | .png | .jpg | .gif`などがあります。
- ベクター画像
  - アルゴリズムを使用して定義されます。
  - ファイルはシェイプ（形状）とパス（経路）の定義が含まれており、画面に描画される時に画像がどのように見えるか、コンピュータが理解することができます。
  - 形式は`.svg`です

この2つの違いは、ページをズームインするとわかりやすいです。左が「ラスター」で右が「ベクター」です。

![raster-vector-zoomed](https://mdn.mozillademos.org/files/12868/raster-vector-zoomed.png)

## SVGとは何か

[SVG](https://developer.mozilla.org/ja/docs/Web/SVG)は、ベクター画像を記述するための[XML](https://developer.mozilla.org/ja/docs/Glossary/XML)ベースの言語です。

これは基本的にはHTMLのようなマークアップですが、画像に表示するシェイプを定義するためのさまざまな要素と、それらのシェイプに適用する効果があります。

SVGは、コンテンツではなくグラフィックをマークアップするためのものです。

また`circle`や`rect`要素で単純なシェイプを作成したり、`feColorMatrix`（変換行列を使用して色を変換）や`animate`（ベクターグラフィックの一部をアニメーション化）、`mask`（画像の上にマスクを適用する）など、高度な機能もあります。

```html
<svg version="1.1"
     baseProfile="full"
     width="300" height="200"
     xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%" fill="black" />
  <circle cx="150" cy="100" r="90" fill="blue" />
</svg>
```

手作業で記述する方法では、複雑な画像を作成は難しいですが、ベクターグラフィックエディターを使用することで、SVG以外の形式で作成した画像からSVG画像へ簡単に変換してくれる機能があります。

**SVGの長所と短所**

- 長所
  - ベクター画像のテキストはアクセス可能（SEOにも役に立つ）。
  - スタイリングやスクリプティングに適しているため、画像の各コンポーネントが、CSSを使用してスタイルを設定したり、JavaScriptでスクリプトを作成できます。
- 短所
  - 複雑になりがちで、ファイルサイズが大きくなる可能性がある（処理時間が長くなる）。
  - 作成しようとしている画像の種類によっては、ラスター画像よりも作成が難しい場合がある
  - 古いブラウザではサポートしていない（IE9以前のバージョンは対応していない）

## SVGをページへ追加する

SVGベクターグラフィックをWebページに追加する方法はいろいろあります。

### `img`要素を使う

```html
<img
    src="equilateral.svg"
    alt="3辺がすべて等しい三角形"
    height="87px"
    width="100px" />
```

- 長所
  - 手早く、画像と同様な構文で、また`alt`属性でテキストを内蔵させることができる
  - `img`を`a`要素内に入れることで、ハイパーリンクすることができる。
- 短所
  - JavaScriptで操作することはできない。
  - CSSでSVGコンテンツを制御することはできない（画像は可能）。また擬似クラス（`:focus`など）で画像のスタイルを変更することはできない。

**トラブルシューティングとクロスブラウザの対応**

SVGに対応していないブラウザでは、`src`属性からPNGまたはJPGを参照し、SVGを参照するために`secret`属性を使用することができる。

この場合、対応しているブラウザのみがSVGを読み込む（古いブラウザは代わりにPNGを読み込む）

```html
<img src="equilateral.png" alt="辺が等しい三角形" srcset="equilateral.svg">
```

### HTMLの中にSVGコードを組み込む

SVGコードをHTML文書に組み込むことを「SVGをインライン化する」と言います。

```html
<svg width="300" height="200">
    <rect width="100%" height="100%" fill="green" />
</svg>
```

- 長所
  - HTTPリクエストが節約され、読み込み時間が短縮される。
  - CSSスタイルを設定することができる。また擬似要素やアニメーションも適用することができる。
  - `a`要素でラップすることでSVGをハイパーリンクすることができる
- 短所
  - 複製している場合、メンテナンスが大変。
  - HTMLファイルのサイズが大きくなる
  - 画像とは違い、キャッシュできない。

### `iframe`でSVGを埋め込む

```html
<iframe src="triangle.svg" width="500" height="500" sandbox>
    <img src="triangle.png" alt="3つの不等辺の三角形" />
</iframe>
```

これはあまり使われない手法。

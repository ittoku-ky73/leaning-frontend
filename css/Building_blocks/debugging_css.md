# CSSのデバッグ

> 参考：https://developer.mozilla.org/ja/docs/Learn/CSS/Building_blocks/Debugging_CSS

このページでは、CSSのさまざまなデバッグ方法について見ていきます。

## ブラウザの開発者ツールの使い方

ブラウザで開発者ツールを開くには「[ブラウザー開発者ツールとは」](https://developer.mozilla.org/ja/docs/Learn/Common_questions/What_are_browser_developer_tools)という記事で書いています。Macの場合は、`command + option + i`でだいたい開きます。

Firefoxの開発者ツールでは、CSSレイアウトを視覚的に操作するための優れたツールがあり、グリッドレイアウト、フレックスボックス、シェイプを検査および編集できます。

ここでは主にFirefoxのDevToolsの開発者ツールを見ていきます。

## DOMとソース表示の違い

開発者ツールを使いはじめの人が困ることは、Webページのソースと開発者ツールのHTMLペインに表示されるコードが異なることです。

これはHTMLペインで表示されるコードは、自分の書いたコードではなく、ブラウザがマークアップを読んで最適化したコードを表示しているためです。

## 適用されたCSSの調査

ルールビューを見ると、その要素に適用されているCSSのプロパティと値を見ることができます。また適用されているルールをオンオフできたりもします。

これを使って、どのプロパティが問題の原因になっているのか調べるときに便利です。

## 値の変更

適用されているルールを編集することもできます。値の数値をいじるときに便利です。

## 新しいプロパティの追加

ルールを追加することもできます。追加したルールをコピペすることもできます。

## ボックスモデルについて

開発者ツールで選んだ要素のボックスモデルも見ることができます。レイアウトを組むときに便利です。

## 詳細度に関する問題の解決

ルールビューでは詳細度も見ることができます。優先されるルールは上の方に表示されていると思います。

## Firefoxの開発者ツールについて

MDNには、Firefox DevToolsに関する多くの情報があります。詳しく知りたい場合は、[Firefox DevTools](https://firefox-source-docs.mozilla.org/devtools-user/index.html)をご覧ください（英語ですが）。

## CSS不具合のデバッグ

CSSの問題を解決する場合、開発者ツールは非常に役に立ちます。もし期待通りに動作しない状況に陥った場合、どのように解決すればよいでしょうか。

**問題から一歩離れてみる**

コーディングの問題はどんなものでもイライラすることがありますが、特にCSSの問題は、ネットで探してもなかなか見つかりません。

そんなときは、散歩に行ったり、飲み物を飲んだり、同僚とおしゃべりしたり、しばらく他のことに取り組んでみましょう。問題を考えるのをやめれば魔法のように解決策が現れることもありますし、そうでなくても、すっきりした気分の時に取り組むと、ずっと楽になります。

**HTMLとCSSは正しく記述されていますか**

ブラウザはCSSとHTMLが正しく記述されていることを期待しますが、ブラウザは非常に寛容であり、マークアップやスタイルシートにエラーがある場合でも、最善を尽くしてWebページを表示します。

それがどうしても許せない！エラーを見つけて修正したい場合はバリデーターを実行しましょう。

- [CSSバリデーター](https://jigsaw.w3.org/css-validator/)
- [HTMLバリデーター](https://validator.w3.org/)

**プロパティと値は対象ブラウザでサポートされていますか**

ブラウザは理解できないCSSを無視します。無視されたCSSは開発者ツールのルールビューで見ることができます。

またMDNの各プロパティページの下部にあるブラウザの互換性の表を見ることで、そのプロパティがサポートされているか見ることもできます。

**何処かでCSSが上書きされていませんか**

ルールビューで新しいセレクタがオーバーライドされているか見ることができます。

**問題の縮小テストケースを作成する**

上記の手順で問題が解決されない場合は、小さなテストケースを作成することです。これは自分のコードや同僚のコードの問題を見つけるのに役立ちますし、バグを報告したり、より効果的に助けを求めたりできるようになります。

縮小テストケースとは、関連のないコンテンツやスタイルを削除して、可能な限りシンプルな方法で問題を示すコード例のことです。

**縮小テストケースの作成手順**

1. ブラウザでHTMLをコピーし、関連するCSSとJavaScriptを取得します。
2. JavaScriptを削除します。問題が解決しない場合は、原因がJavaScriptでないためそのまま削除しておきします。
3. 問題の原因になっていないHTMLを削除します。できるだけ最小限のコードになるようにします。
4. 問題に影響を与えないCSSを削除します。

このテストケースを作っている途中で問題がわかることもあります。それでもわからない場合はフォーラムに投稿したり、同僚に見せたりして助けを求めましょう。どこで問題が発生しているかを正確に特定する作業をおこなったことを示すことができれば、助けを得る可能性が高くなります。

問題が実際にブラウザのバグである場合、テストケースの縮小を使用して、関連するブラウザベンダーにバグレポートを提出することもできます。

CSSを使いこなせるようになると、問題を発見するのが早くなります。しかし、最も経験豊富な人でも「一体何が起こっているのか」と疑問に思うことがあります。体系的なアプローチを取り、テストケースを減らし、他の人に問題を説明すると、大抵は修正が見つかります。

# 位置指定

> 参考：https://developer.mozilla.org/ja/docs/Learn/CSS/CSS_layout/Positioning

このページでは、さまざまな`position`プロパティの値とその使い方について見ていきます。

## 位置指定の紹介

位置指定（positioning）の本来の趣旨は、「興味深い効果を生み出すために、上記の基本的なドキュメントフローのふるまいを上書きできるようにする」ことです。

ページの他の部分の上に浮かぶUI要素を作成したり、ページをいくらスクロールしても常にブラウザウィンドウ内の同じ場所に配置されるなどはpositioningの機能の一部です。

`position`プロパティは、要素の位置指定をアクティブにします。

### 静的位置指定

静的位置指定（Static positioning）は、すべての要素が取得するデフォルトです。これは「要素をドキュメントレイアウトフロー内の通常の位置に配置する・ここで見るべき特別なことはありません」ということです。

```css
.static {
  position: static;
}
```

### 相対位置指定

相対位置指定（Relative positioning）は、静的位置指定の位置に配置されますが、その要素を他の要素と関係なく位置をずらすことができます。

```css
.relative {
  position: relative;
}
```

### top, bottom, left, rightの紹介

`top, bottom, left, right`プロパティは、位置指定要素の移動先を変更することができます。使用する際は慣れが必要です。

```css
.position {
  position: relative;
  top: 20px;
  left: 20px;
}
```

### 絶対位置指定

絶対位置指定（Absolute positioning）は、他の要素は関係なく配置されます。

これはページ上の他の要素のレイアウトを妨げない独立したUI機能を作成できます。例えばポップアップ情報ボックス、コントロールメニュー、ロールオーバーパネル、ドラッグ&ドロップできるUI機能などです。

つぎに、`top, bottom, left, right`プロパティのふるまいが異なります。これは要素がそれぞれの包含要素の側からあるべき距離を指定します。この包含要素とは最初の包含ブロック（initial containing block）のことです（下記で説明）。

### 位置指定コンテキスト

絶対位置指定要素の包含要素とはどの要素でしょう。これは位置指定要素の先祖の`position`プロパティに大きく依存します。答えは「包含ブロックの`position`の値が`static`以外の直近の要素」が絶対位置指定の包含要素です。

見つからなかった場合は`body`が包含要素となります。

他の位置指定の包含ブロックについては[包含ブロックの識別](https://developer.mozilla.org/ja/docs/Web/CSS/Containing_block#identifying_the_containing_block)で書いています。

### z-indexの紹介

`z-index`プロパティは、要素同士が重なったときに、どの要素が他の要素の上に表すか値によって指定することができます。

値が大きい要素ほど、優先度は高くなります。

```css
p:nth-of-type(1) {
  position: absolute;
  z-index: 1;
}
```

### 固定位置指定

固定位置指定（Fixed positioning）は、絶対位置指定と似ていますが、違うところはページのスクロール量に関係なく常に表示される点です。つまり要素がページに固定されます。

`position: fixed`で固定位置指定を定義できます。どのように動作するかは、実際に体験した方がわかりやすいです。

### position: sticky

やや新しい機能で基本的には相対位置指定と固定位置指定のハイブリッドであり、位置指定要素は、その要素がページ上に現れるまでは相対位置指定のように動作し、要素がページ上に現れたら固定されます（くっつきます）。

# フレックスボックス

> 参考：https://developer.mozilla.org/ja/docs/Learn/CSS/CSS_layout/Flexbox

このページでは、フレックスボックスの項目を行や列にレイアウトするための1次元レイアウト方法や、それの制御方法について見ていきます。

## なぜフレックスボックスなのか

長い間、CSSレイアウトを作成するために利用可能な唯一の信頼できるクロスブラウザ互換ツールはフロートと位置指定のようなものでした。これらは問題なく機能しますが、いくつかの点ではかなり限定的でイライラします。

次のようなことはフロートや位置指定で使用とするには難しい、不可能です。

- コンテンツのブロックをその親要素内で垂直方向に中央揃えにする。
- コンテナのすべての子が、使用可能な幅や高さに関係なく、使用可能な幅や高さを等しい量で占めるようにする。
- 複数レイアウトの全ての列に、異なる量のコンテンツが含まれていても、同じ高さを採用する。

## 簡単な例の紹介

飛ばす。

### 柔軟な箱としてレイアウトする要素を指定

`display: flex;`は、直接の子要素に、親要素の柔軟な箱（flexible box）としてレイアウトさせます。

### フレックスモデルの概要

要素が柔軟な箱として配置される時、次のような2つの軸に沿って配置されます。

![flex_terms](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox/flex_terms.png)

- 主軸（main axis）、フレックス項目が配置されている方向に走る軸。この軸の始点と終点は、主始点（main start）、主終点（main end）と言います。
- 交差軸（cross axis）、フレックス項目が配置されている方向に対して垂直に走る軸です。この軸の始点と終点は、交差始点（cross start）、交差終点（cross end）と言います。
- フレックスコンテナ（flex container）、`display: flex;`が設定されている親要素です。
- フレックス項目（flex item）、フレックスコンテナ内の柔軟な箱としてレイアウトされている項目。

### 列、それとも行

`flex-direction`プロパティは、主軸が走る方向を指定します。デフォルトでは`row`（行）で横一列にレイアウトされます。値を`column`（列）にすると縦一列にレイアウトされます。

また`row-reverse, column-reverse`という値は、フレックス項目を逆方向にレイアウトします。

### ラッピング

レイアウトの幅や高さが決まっているときに発生する問題の1つは、フレックス項目がオーバーフローを起こしてレイアウトが壊れることです。

これは、親要素に`flex-wrap: wrap`、子要素に`flex: 200px;`を指定することで防げます。

### flex-flow一括指定

`flex-flow`プロパティは、`flex-direction, flex-wrap`を一括指定することができます。

```css
p {
  flex-direction: row;
  flex-wrap: wrap;
}

p {
  flex-flow: row wrap;
}
```

### フレックス項目の柔軟なサイズ変更

`flex`プロパティの値は各フレックス項目が主軸に沿って使用可能なスペースのうちどれだけを占めるかを決定する無単位の割合値です。

また、割合値の他に最小サイズ値を設定することもできます。

```css
article {
  flex: 1 200px;
}

article:last-child {
  flex: 2 200px;
}
```

これは「各フレックス項目には最初に200pxの使用可能なスペースが与えられます。その後、残りの使用可能なスペースは割合単位に従って共有されます。」ということになります。

### flex: 一括指定vs個別指定

`flex`プロパティは、最大3つの異なる値を指定できる一括指定プロパティです。指定できるプロパティは次のとおりです。

- `flex-grow`、無単位の割合値。
- `flex-shrink`、フレックス項目がオーバーフローしているときに有効になる2番目の無単位の割合値。
- `flex-basis`、最小サイズ値。

おすすめは本当に必要な場合以外で個別指定の`flex`プロパティを使用**しない**ことです。

### 水平方向と垂直方向の配置

`align-items`プロパティは、フレックス項目が交差軸上のどこに配置されるかを制御します。値は次のとおりです。

- `streach`、デフォルト。これは全てのフレックス項目を交差軸の方向に親要素を埋めるように引き伸ばします。
- `center`、項目は固有の寸法を維持しますが、交差軸の中心に配置されます。
- `flex-start, flex-end`、全ての項目をそれぞれ交差軸の始点や終点にそろえます。

`align-self`プロパティは、ここのフレックス項目の`align-items`の振る舞いを上書きできます。値は上記と一緒です。

`justify-content`プロパティは、フレックス項目が主軸上のどこに配置されるかを制御します。値は次のとおり。

- `flex-start`、デフォルト。全ての項目が主軸の始点に配置されます。
- `flex-end`、全ての項目が主軸の終点に配置されます。
- `center`、主軸の中心に配置されます。
- `space-around`、両端に少しのスペースを残して、主軸に沿って均等に配置します。
- `space-between`、`space-around`と似ており、こちらは両端にスペースを残しません。

### フレックス項目の順序づけ

`order`プロパティは、フレックス項目のレイアウトの順序を指定します。デフォルトの値は0です。マイナスも指定可能です。

```css
article:first-child {
  order: 1;
}
```

### ネストしたフレックスボックス

フレックスボックスのネストは、その直接の子要素から下でフレックスボックスを定義しても動作します。button要素にフレックスを適用したい場合は、div要素にフレックスの親要素として適用すると良いでしょう。

```text
section - article
          article
          article - div - button
                    div   button
                    div   button
                          button
                          button
```

### クロスブラウザ互換性

フレックスボックスのサポートは、Firefox, Chrome, Opera, Microsoft Edge, IE 11, Android/iOSの新しいバージョンなど、ほとんどの新しいブラウザで利用できます。

実際のウェブサイトでフレックスボックスを使用する場合は、テストを行い、できるだけ多くのブラウザでユーザエクスペリエンスが許容範囲であることを確認する必要があります。

[クロスブラウザーテスト](https://developer.mozilla.org/ja/docs/Learn/Tools_and_testing/Cross_browser_testing)の記事では、クロスブラウザのサポートの問題を解決するための戦略について書いています。

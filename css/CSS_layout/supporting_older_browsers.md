# 古いブラウザーのサポート

> 参考：https://developer.mozilla.org/ja/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers

このページでは、古い技術を使用するユーザを許容しつつ、最新のウェブ技術を使用する方法について見ていきます。

### サイトのブラウザ利用状況

すべてのウェブサイトは、対象視聴者が異なります。なのでアプローチを決める前に、古いブラウザでサイトにやってくる訪問者の数を調べてください。

またデバイスの種類やサイトの利用方法についても検討する必要があります。開発者は多くの場合、古いIEのユーザ1%のことを気にしますが、99%のユーザのアクセシビリティについてはあまり考えません。

### 使用したい機能に対するサポート

これについては、MDNでCSSプロパティで検索をかけてそのページにいくとプロパティのサポートを開始したバージョンの一覧をまとめた表を見ることができます。また[Can I Use](https://caniuse.com/)ウェブサイトでも見ることができます。

### サポートは「同じに見える」という意味ではない

ユーザの中にはサイトを、携帯電話でみたり、デスクトップでみたり、音声で聞いていたり、そしてブラウザも様々な種類があります。

基本レベルのサポートとして、ページの通常フローが意味をなすようにコンテンツを適切に構成することです。スタイルシートを削除したときに、コンテンツが意味のあるようにすること。

もう1つの選択肢は、非常に古いブラウザや限られたブラウザを使用しているユーザの代替手段として、サイトのプレーンなビューを残すことです。これはアクセス数が少ないページで使用されることがあります。

## CSSで代替手段を作成する

下記では、グリッドレイアウトとフロートレイアウトを同時に定義しています。この場合、グリッドをサポートしているブラウザはグリッドを、サポートしていないブラウザはフロートを使うようになっています。

```css
.wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
}

.item {
  float: left;
}
```

### 代替手段の方法

**フロートとクリア**

上記のように、フロート項目、またはクリアされた項目がフレックス項目、グリッド項目になると、`float, clear`プロパティは影響を与えなくなります。

**display: inline-block**

項目に`display: inline-block`が定義されていて、フレックス、グリッド項目になる場合、無視されます。

**display: table**

インラインブロックと同じ振る舞いをする。

**段組みレイアウト**

こちらも同様に振る舞います。

**グリッドの代替手段としてのフレックスボックス**

こちらも同様にふるまいます。

### 機能クエリ

機能クエリを使用すると、ブラウザが特定のCSS機能をサポートしているかどうかテストします。つまり、機能をサポートしていないブラウザ用のCSSを作成してから、ブラウザがサポートしているか確認し、サポートしている場合はレイアウトを追加するというものです。

```css
@supports (display: grid) {
  .item {
    width: auto;
  }
}
```

機能クエリは便利ですが、CSSグリッドをサポートしていないブラウザでは機能クエリ自体をサポートしていないです。

機能クエリの仕様には、ブラウザが機能をサポートしていないことをテストする機能も含まれています。

### 古いバージョンのフレックスボックス

Internet Explorer 10の問題であるCSSプロパティに`-ms-`接頭辞があります。

### IE10とIE11の接頭辞版のグリッド

前に`-ms-`がついているプロパティは、マイクロソフト以外のブラウザでは無視されます。

### 古いブラウザをテストする

[クロスブラウザーテスト](https://developer.mozilla.org/ja/docs/Learn/Tools_and_testing/Cross_browser_testing)についてはここでは説明しません。気になる場合はURLに飛んでください。
